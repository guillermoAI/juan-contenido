<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cliente | GH Consulting</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background: #0a0a0a;
            color: #fff;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            min-height: 100vh;
        }
        
        /* Layout */
        .layout {
            display: flex;
            min-height: 100vh;
        }
        .sidebar {
            width: 280px;
            background: #0a0a0a;
            border-right: 1px solid #1a1a1a;
            padding: 1.5rem;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
        }
        .main {
            flex: 1;
            margin-left: 280px;
            padding: 2rem;
        }
        
        /* Sidebar */
        .client-avatar {
            width: 72px;
            height: 72px;
            border-radius: 16px;
            background: linear-gradient(135deg, #fff, #ccc);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: 700;
            color: #0a0a0a;
            margin-bottom: 1rem;
        }
        .client-name {
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 0.25rem;
        }
        .client-handle {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }
        .status-badge {
            display: inline-block;
            padding: 0.3rem 0.8rem;
            background: #0f2d1a;
            color: #4ade80;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        
        .sidebar-section {
            margin-top: 2rem;
            padding-top: 1.5rem;
            border-top: 1px solid #1a1a1a;
        }
        .sidebar-label {
            font-size: 0.7rem;
            color: #555;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 0.75rem;
        }
        .sidebar-value {
            font-size: 0.9rem;
            color: #ccc;
            margin-bottom: 0.5rem;
        }
        .sidebar-value span {
            color: #666;
        }
        
        .sidebar-actions {
            margin-top: 2rem;
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }
        .btn {
            display: block;
            width: 100%;
            padding: 0.75rem 1rem;
            text-align: center;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.2s;
            border: none;
            cursor: pointer;
        }
        .btn-primary {
            background: #fff;
            color: #0a0a0a;
        }
        .btn-primary:hover { background: #e5e5e5; }
        .btn-secondary {
            background: #111;
            color: #fff;
            border: 1px solid #222;
        }
        .btn-secondary:hover { background: #1a1a1a; border-color: #333; }
        
        .back-link {
            display: block;
            margin-top: 1.5rem;
            color: #555;
            text-decoration: none;
            font-size: 0.85rem;
        }
        .back-link:hover { color: #888; }
        
        /* Main content */
        .page-header {
            margin-bottom: 2rem;
        }
        .page-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #888;
            margin-bottom: 0.25rem;
        }
        .page-subtitle {
            font-size: 0.85rem;
            color: #444;
        }
        
        .grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin-bottom: 2rem;
        }
        .grid-2 {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
        }
        @media (max-width: 1200px) {
            .grid { grid-template-columns: repeat(2, 1fr); }
            .grid-2 { grid-template-columns: 1fr; }
        }
        @media (max-width: 900px) {
            .sidebar { display: none; }
            .main { margin-left: 0; }
            .grid { grid-template-columns: 1fr; }
        }
        
        /* Metric cards */
        .metric-card {
            background: #111;
            border: 1px solid #1a1a1a;
            border-radius: 12px;
            padding: 1.25rem;
        }
        .metric-label {
            font-size: 0.75rem;
            color: #555;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 0.5rem;
        }
        .metric-value {
            font-size: 2rem;
            font-weight: 700;
        }
        .metric-value.green { color: #4ade80; }
        .metric-change {
            font-size: 0.8rem;
            color: #666;
            margin-top: 0.25rem;
        }
        .metric-change.up { color: #4ade80; }
        .metric-change.down { color: #ef4444; }
        
        /* Cards */
        .card {
            background: #111;
            border: 1px solid #1a1a1a;
            border-radius: 12px;
            padding: 1.5rem;
        }
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        .card-title {
            font-size: 0.8rem;
            color: #555;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 600;
        }
        .card-action {
            font-size: 0.8rem;
            color: #555;
            background: none;
            border: none;
            cursor: pointer;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
        }
        .card-action:hover { background: #1a1a1a; color: #888; }
        
        /* Roadmap */
        .roadmap {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        .roadmap-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.6rem 0;
        }
        .roadmap-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #333;
            flex-shrink: 0;
        }
        .roadmap-dot.done { background: #4ade80; }
        .roadmap-dot.current { background: #fff; box-shadow: 0 0 0 3px rgba(255,255,255,0.2); }
        .roadmap-text {
            font-size: 0.9rem;
            color: #666;
        }
        .roadmap-text.done { color: #4ade80; }
        .roadmap-text.current { color: #fff; font-weight: 500; }
        
        .progress-bar {
            height: 4px;
            background: #222;
            border-radius: 2px;
            margin-top: 1rem;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: #fff;
            border-radius: 2px;
            transition: width 0.3s;
        }
        
        /* To-dos */
        .todo-list {
            display: flex;
            flex-direction: column;
        }
        .todo-item {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            padding: 0.75rem 0;
            border-bottom: 1px solid #1a1a1a;
        }
        .todo-item:last-child { border-bottom: none; }
        .todo-checkbox {
            width: 20px;
            height: 20px;
            border: 2px solid #333;
            border-radius: 4px;
            cursor: pointer;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }
        .todo-checkbox:hover { border-color: #555; }
        .todo-checkbox.done {
            background: #4ade80;
            border-color: #4ade80;
        }
        .todo-checkbox.done::after {
            content: '✓';
            color: #0a0a0a;
            font-size: 0.7rem;
            font-weight: 700;
        }
        .todo-text {
            flex: 1;
            font-size: 0.9rem;
            line-height: 1.4;
            color: #ccc;
        }
        .todo-text.done {
            text-decoration: line-through;
            color: #555;
        }
        .todo-delete {
            opacity: 0;
            background: none;
            border: none;
            color: #555;
            cursor: pointer;
            padding: 0.25rem;
            font-size: 0.8rem;
        }
        .todo-item:hover .todo-delete { opacity: 1; }
        .todo-delete:hover { color: #ef4444; }
        
        .todo-input-row {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid #1a1a1a;
        }
        .todo-input {
            flex: 1;
            padding: 0.6rem 0.75rem;
            background: #0a0a0a;
            border: 1px solid #222;
            border-radius: 6px;
            color: #fff;
            font-size: 0.85rem;
        }
        .todo-input:focus { outline: none; border-color: #333; }
        .todo-input::placeholder { color: #444; }
        .todo-add {
            padding: 0.6rem 1rem;
            background: #1a1a1a;
            border: none;
            border-radius: 6px;
            color: #888;
            font-size: 0.85rem;
            cursor: pointer;
        }
        .todo-add:hover { background: #222; color: #fff; }
        
        /* Notes */
        .notes-list {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }
        .note-item {
            background: #0a0a0a;
            border-radius: 8px;
            padding: 1rem;
            position: relative;
        }
        .note-date {
            font-size: 0.7rem;
            color: #444;
            margin-bottom: 0.5rem;
        }
        .note-text {
            font-size: 0.9rem;
            color: #999;
            line-height: 1.5;
        }
        .note-delete {
            position: absolute;
            top: 0.75rem;
            right: 0.75rem;
            opacity: 0;
            background: none;
            border: none;
            color: #444;
            cursor: pointer;
            font-size: 0.8rem;
        }
        .note-item:hover .note-delete { opacity: 1; }
        .note-delete:hover { color: #ef4444; }
        
        .note-input {
            width: 100%;
            padding: 0.75rem;
            background: #0a0a0a;
            border: 1px solid #222;
            border-radius: 8px;
            color: #fff;
            font-size: 0.85rem;
            resize: none;
            min-height: 80px;
            margin-top: 1rem;
        }
        .note-input:focus { outline: none; border-color: #333; }
        .note-input::placeholder { color: #444; }
        .note-submit {
            margin-top: 0.5rem;
            padding: 0.5rem 1rem;
            background: #1a1a1a;
            border: none;
            border-radius: 6px;
            color: #888;
            font-size: 0.85rem;
            cursor: pointer;
        }
        .note-submit:hover { background: #222; color: #fff; }
        
        /* Empty state */
        .empty-state {
            text-align: center;
            padding: 2rem;
            color: #444;
            font-size: 0.9rem;
        }
        
        /* Section spacing */
        .section {
            margin-bottom: 2rem;
        }
        .section-title {
            font-size: 0.8rem;
            color: #555;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 1rem;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class="layout">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="client-avatar" id="avatar">P</div>
            <div class="client-name" id="clientName">Pablo Pérez</div>
            <div class="client-handle" id="clientHandle">@pabloperez</div>
            <span class="status-badge">Activo</span>
            
            <div class="sidebar-section">
                <div class="sidebar-label">Nicho</div>
                <div class="sidebar-value" id="clientNicho">Dropshipping / Infoproductos</div>
            </div>
            
            <div class="sidebar-section">
                <div class="sidebar-label">Contrato</div>
                <div class="sidebar-value" id="clientContrato">—</div>
            </div>
            
            <div class="sidebar-section">
                <div class="sidebar-label">Objetivo</div>
                <div class="sidebar-value" id="clientObjetivo">—</div>
            </div>
            
            <div class="sidebar-actions">
                <a href="#" class="btn btn-primary" id="btnMetricas">Actualizar métricas</a>
                <a href="https://cal.com/guillermohernandez" class="btn btn-secondary" target="_blank">Agendar call</a>
            </div>
            
            <a href="index.html" class="back-link">← Todos los clientes</a>
        </aside>
        
        <!-- Main -->
        <main class="main">
            <!-- Métricas -->
            <section class="section">
                <div class="section-title">Métricas actuales</div>
                <div class="grid">
                    <div class="metric-card">
                        <div class="metric-label">Facturación mes</div>
                        <div class="metric-value green" id="metricRevenue">—</div>
                        <div class="metric-change" id="metricRevenueChange"></div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Seguidores</div>
                        <div class="metric-value" id="metricFollowers">—</div>
                        <div class="metric-change" id="metricFollowersChange"></div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Clientes activos</div>
                        <div class="metric-value" id="metricClients">—</div>
                        <div class="metric-change" id="metricClientsChange"></div>
                    </div>
                </div>
            </section>
            
            <div class="grid-2">
                <!-- Roadmap -->
                <div class="card">
                    <div class="card-header">
                        <span class="card-title">Roadmap</span>
                        <span class="card-action" id="roadmapPhase">Fase 1 de 4</span>
                    </div>
                    <div class="roadmap" id="roadmapList">
                        <!-- Populated by JS -->
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="roadmapProgress" style="width: 25%"></div>
                    </div>
                </div>
                
                <!-- To-dos -->
                <div class="card">
                    <div class="card-header">
                        <span class="card-title">Tareas pendientes</span>
                        <span class="card-action" id="todoCount">0 de 0</span>
                    </div>
                    <div class="todo-list" id="todoList">
                        <!-- Populated by JS -->
                    </div>
                    <div class="todo-input-row">
                        <input type="text" class="todo-input" id="todoInput" placeholder="Añadir tarea...">
                        <button class="todo-add" id="todoAdd">Añadir</button>
                    </div>
                </div>
            </div>
            
            <!-- Notas -->
            <section class="section" style="margin-top: 1.5rem;">
                <div class="card">
                    <div class="card-header">
                        <span class="card-title">Notas</span>
                    </div>
                    <div class="notes-list" id="notesList">
                        <!-- Populated by JS -->
                    </div>
                    <textarea class="note-input" id="noteInput" placeholder="Añadir una nota..."></textarea>
                    <button class="note-submit" id="noteAdd">Guardar nota</button>
                </div>
            </section>
        </main>
    </div>

    <script>
        // ============================================
        // CLIENT DATA - Edit this for each client
        // ============================================
        const CLIENT = {
            id: 'pablo',
            name: 'Pablo Pérez Hurtado',
            handle: '@pabloperez',
            avatar: 'P',
            nicho: 'Dropshipping / Infoproductos',
            contrato: '—',
            objetivo: '€75-100k/mes en 6 meses',
            roadmap: [
                { text: 'Onboarding', status: 'done' },
                { text: 'Diagnóstico inicial', status: 'done' },
                { text: 'Definir oferta', status: 'current' },
                { text: 'Contenido de conversión', status: 'pending' },
                { text: 'Lanzamiento', status: 'pending' }
            ],
            defaultTodos: [
                'Atraer ICP cualificado',
                'Resolver objeciones por adelantado',
                'Optimización del perfil (percepción)',
                'Lanzar oferta oficial al mercado',
                'Crear contenido mostrando resultados'
            ],
            defaultNotes: [
                { date: '2026-02-10', text: 'Pablo ha facturado €500k en 3 meses con ecommerce (dropshipping). Quiere transicionar a vender cursos/mentorías. Ya tiene su primera venta (€2,500 - sala 3 meses).' }
            ]
        };
        
        // ============================================
        // STORAGE KEYS
        // ============================================
        const STORAGE_KEYS = {
            todos: `gh_todos_${CLIENT.id}`,
            notes: `gh_notes_${CLIENT.id}`,
            metrics: `gh_metrics_${CLIENT.id}`
        };
        
        // ============================================
        // INIT
        // ============================================
        function init() {
            // Set client info
            document.getElementById('avatar').textContent = CLIENT.avatar;
            document.getElementById('clientName').textContent = CLIENT.name;
            document.getElementById('clientHandle').textContent = CLIENT.handle;
            document.getElementById('clientNicho').textContent = CLIENT.nicho;
            document.getElementById('clientContrato').textContent = CLIENT.contrato;
            document.getElementById('clientObjetivo').textContent = CLIENT.objetivo;
            document.getElementById('btnMetricas').href = `../tracking/update.html?c=${CLIENT.id}`;
            document.title = `${CLIENT.name} | GH Consulting`;
            
            // Render components
            renderRoadmap();
            renderTodos();
            renderNotes();
            renderMetrics();
            
            // Event listeners
            document.getElementById('todoAdd').addEventListener('click', addTodo);
            document.getElementById('todoInput').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') addTodo();
            });
            document.getElementById('noteAdd').addEventListener('click', addNote);
        }
        
        // ============================================
        // ROADMAP
        // ============================================
        function renderRoadmap() {
            const container = document.getElementById('roadmapList');
            container.innerHTML = '';
            
            let currentPhase = 0;
            let doneCount = 0;
            
            CLIENT.roadmap.forEach((item, i) => {
                if (item.status === 'done') doneCount++;
                if (item.status === 'current') currentPhase = i + 1;
                
                container.innerHTML += `
                    <div class="roadmap-item">
                        <div class="roadmap-dot ${item.status}"></div>
                        <span class="roadmap-text ${item.status}">${item.text}</span>
                    </div>
                `;
            });
            
            const progress = (doneCount / CLIENT.roadmap.length) * 100;
            document.getElementById('roadmapProgress').style.width = `${progress}%`;
            document.getElementById('roadmapPhase').textContent = `Fase ${currentPhase || doneCount} de ${CLIENT.roadmap.length}`;
        }
        
        // ============================================
        // TODOS
        // ============================================
        function getTodos() {
            const stored = localStorage.getItem(STORAGE_KEYS.todos);
            if (stored) return JSON.parse(stored);
            return CLIENT.defaultTodos.map(text => ({ text, done: false }));
        }
        
        function saveTodos(todos) {
            localStorage.setItem(STORAGE_KEYS.todos, JSON.stringify(todos));
        }
        
        function renderTodos() {
            const container = document.getElementById('todoList');
            const todos = getTodos();
            container.innerHTML = '';
            
            if (todos.length === 0) {
                container.innerHTML = '<div class="empty-state">Sin tareas pendientes</div>';
            } else {
                todos.forEach((todo, i) => {
                    container.innerHTML += `
                        <div class="todo-item">
                            <div class="todo-checkbox ${todo.done ? 'done' : ''}" data-index="${i}"></div>
                            <span class="todo-text ${todo.done ? 'done' : ''}">${todo.text}</span>
                            <button class="todo-delete" data-index="${i}">×</button>
                        </div>
                    `;
                });
            }
            
            // Update count
            const doneCount = todos.filter(t => t.done).length;
            document.getElementById('todoCount').textContent = `${doneCount} de ${todos.length}`;
            
            // Event listeners
            container.querySelectorAll('.todo-checkbox').forEach(cb => {
                cb.addEventListener('click', () => toggleTodo(parseInt(cb.dataset.index)));
            });
            container.querySelectorAll('.todo-delete').forEach(btn => {
                btn.addEventListener('click', () => deleteTodo(parseInt(btn.dataset.index)));
            });
        }
        
        function toggleTodo(index) {
            const todos = getTodos();
            todos[index].done = !todos[index].done;
            saveTodos(todos);
            renderTodos();
        }
        
        function deleteTodo(index) {
            const todos = getTodos();
            todos.splice(index, 1);
            saveTodos(todos);
            renderTodos();
        }
        
        function addTodo() {
            const input = document.getElementById('todoInput');
            const text = input.value.trim();
            if (!text) return;
            
            const todos = getTodos();
            todos.push({ text, done: false });
            saveTodos(todos);
            renderTodos();
            input.value = '';
        }
        
        // ============================================
        // NOTES
        // ============================================
        function getNotes() {
            const stored = localStorage.getItem(STORAGE_KEYS.notes);
            if (stored) return JSON.parse(stored);
            return CLIENT.defaultNotes || [];
        }
        
        function saveNotes(notes) {
            localStorage.setItem(STORAGE_KEYS.notes, JSON.stringify(notes));
        }
        
        function renderNotes() {
            const container = document.getElementById('notesList');
            const notes = getNotes();
            container.innerHTML = '';
            
            if (notes.length === 0) {
                container.innerHTML = '<div class="empty-state">Sin notas</div>';
            } else {
                notes.forEach((note, i) => {
                    const date = new Date(note.date).toLocaleDateString('es-ES', {
                        day: 'numeric', month: 'short', year: 'numeric'
                    });
                    container.innerHTML += `
                        <div class="note-item">
                            <div class="note-date">${date}</div>
                            <div class="note-text">${note.text}</div>
                            <button class="note-delete" data-index="${i}">×</button>
                        </div>
                    `;
                });
            }
            
            // Event listeners
            container.querySelectorAll('.note-delete').forEach(btn => {
                btn.addEventListener('click', () => deleteNote(parseInt(btn.dataset.index)));
            });
        }
        
        function deleteNote(index) {
            const notes = getNotes();
            notes.splice(index, 1);
            saveNotes(notes);
            renderNotes();
        }
        
        function addNote() {
            const input = document.getElementById('noteInput');
            const text = input.value.trim();
            if (!text) return;
            
            const notes = getNotes();
            notes.unshift({
                date: new Date().toISOString(),
                text: text
            });
            saveNotes(notes);
            renderNotes();
            input.value = '';
        }
        
        // ============================================
        // METRICS (from localStorage or tracking)
        // ============================================
        function renderMetrics() {
            const stored = localStorage.getItem(STORAGE_KEYS.metrics);
            if (stored) {
                const m = JSON.parse(stored);
                if (m.revenue) document.getElementById('metricRevenue').textContent = `€${m.revenue.toLocaleString()}`;
                if (m.followers) document.getElementById('metricFollowers').textContent = m.followers.toLocaleString();
                if (m.clients) document.getElementById('metricClients').textContent = m.clients;
            }
        }
        
        // ============================================
        // START
        // ============================================
        init();
    </script>
</body>
</html>
